{% extends "layout_dashboard.html" %}

{% block styles %}
<link rel="stylesheet" href="../static/css/dashboard.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

{% endblock %}

<!-- dumb ways but its works xixixi -->
{% block sidebar_dasboard %}
class ="active"
{% endblock %}

{% block content %}
<h4 class="title title2">Dashboard</h4>
<div class="container">
    <div class="boxes">
        <div class="box box_1">
            <span class="text">PH Air</span>
            <span class="number">
                N/A
                <img class="imgLogo" src="../static/assets/Vector ph.svg" alt="PH air">
            </span>
        </div>
        <div class="box box_2">
            <span class="text">Suhu Air</span>
            <span class="number">
                N/A
                <img class="imgLogo" src="../static/assets/vector suhu.svg" alt="">
            </span>
        </div>
        <div class="box box_3">
            <span class="text">TDS</span>
            <span class="number">
                N/A <!-- sementara ntar diganti sama dynamic -->
                <img class="imgLogo" src="../static/assets/Vector TDS.svg" alt="">
            </span>
        </div>
        <div class="box box_4">
            <span class="text">Turbidity</span>
            <span class="number">
                N/A
                <img class="imgLogo" src="../static/assets/Vector turbidity.svg" alt="">
            </span>
        </div>
    </div>

    <!-- Button Dapatkan Saran -->
    <div class="col-md-4">
        <button class="btn btn-light fw-bold w-100 mt-4 boxSaran">
            <svg class="bintang_saran" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 29 29" preserveAspectRatio="xMidYMid meet" style="width: 1.5em; height: 1.5em; max-width: 100%; max-height: 100%; vertical-align: middle;"><g fill="none"><path d="m12.594 23.258l-.012.002l-.071.035l-.02.004l-.014-.004l-.071-.036q-.016-.004-.024.006l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.016-.018m.264-.113l-.014.002l-.184.093l-.01.01l-.003.011l.018.43l.005.012l.008.008l.201.092q.019.005.029-.008l.004-.014l-.034-.614q-.005-.019-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.003-.011l.018-.43l-.003-.012l-.01-.01z"/><path fill="#2EC4B6" d="M9.107 5.448c.598-1.75 3.016-1.803 3.725-.159l.06.16l.807 2.36a4 4 0 0 0 2.276 2.411l.217.081l2.36.806c1.75.598 1.803 3.016.16 3.725l-.16.06l-2.36.807a4 4 0 0 0-2.412 2.276l-.081.216l-.806 2.361c-.598 1.75-3.016 1.803-3.724.16l-.062-.16l-.806-2.36a4 4 0 0 0-2.276-2.412l-.216-.081l-2.36-.806c-1.751-.598-1.804-3.016-.16-3.724l.16-.062l2.36-.806A4 4 0 0 0 8.22 8.025l.081-.216zM19 2a1 1 0 0 1 .898.56l.048.117l.35 1.026l1.027.35a1 1 0 0 1 .118 1.845l-.118.048l-1.026.35l-.35 1.027a1 1 0 0 1-1.845.117l-.048-.117l-.35-1.026l-1.027-.35a1 1 0 0 1-.118-1.845l.118-.048l1.026-.35l.35-1.027A1 1 0 0 1 19 2"/></g></svg>
            Dapatkan Saran
        </button>
    </div>

    <!-- Filter Controls -->

    <!-- Filter Tanggal -->
    <div class="filter-controls">
        <div class="input-container">
            <svg class="dropdown-filter-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" style="width: 1.5em; height: 1.5em; max-width: 100%; max-height: 100%; vertical-align: middle;"><path fill="#2EC4B6" d="M19.778 12a7.778 7.778 0 1 0-15.556 0a7.778 7.778 0 0 0 15.556 0m-5.23-2.452a1.11 1.11 0 1 1 1.57 1.57l-3.332 3.334a1.11 1.11 0 0 1-1.572 0L7.881 11.12l-.076-.085a1.11 1.11 0 0 1 1.563-1.562l.084.076L12 12.095zM22 12c0 5.523-4.477 10-10 10S2 17.523 2 12S6.477 2 12 2s10 4.477 10 10"/></svg>
            <input type="text" id="tanggalAwal" placeholder="Tanggal Awal" class="btn btn-filter">
        </div>
        <div class="input-container">
            <svg class="dropdown-filter-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" style="width: 1.5em; height: 1.5em; max-width: 100%; max-height: 100%; vertical-align: middle;"><path fill="#2EC4B6" d="M19.778 12a7.778 7.778 0 1 0-15.556 0a7.778 7.778 0 0 0 15.556 0m-5.23-2.452a1.11 1.11 0 1 1 1.57 1.57l-3.332 3.334a1.11 1.11 0 0 1-1.572 0L7.881 11.12l-.076-.085a1.11 1.11 0 0 1 1.563-1.562l.084.076L12 12.095zM22 12c0 5.523-4.477 10-10 10S2 17.523 2 12S6.477 2 12 2s10 4.477 10 10"/></svg>
            <input type="text" id="tanggalAkhir" placeholder="Tanggal Akhir" class="btn btn-filter">
        </div>
        <div class="input-container">
            <svg class="dropdown-filter-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" style="width: 1.5em; height: 1.5em; max-width: 100%; max-height: 100%; vertical-align: middle;"><path fill="#2EC4B6" d="M19.778 12a7.778 7.778 0 1 0-15.556 0a7.778 7.778 0 0 0 15.556 0m-5.23-2.452a1.11 1.11 0 1 1 1.57 1.57l-3.332 3.334a1.11 1.11 0 0 1-1.572 0L7.881 11.12l-.076-.085a1.11 1.11 0 0 1 1.563-1.562l.084.076L12 12.095zM22 12c0 5.523-4.477 10-10 10S2 17.523 2 12S6.477 2 12 2s10 4.477 10 10"/></svg>
            <input type="text" class="btn btn-filter" placeholder="Granulitas">
        </div>
    </div>

    <!-- Ringkasan Statistik -->
    <div class="statistics-table">
        <h4>Ringkasan Statistik</h4>
        <table class="table table-isi">
            <thead>
                <tr>
                    <th>Sensor</th>
                    <th>Maksimum</th>
                    <th>Minimum</th>
                    <th>Rata-Rata</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>PH</td>
                    <!-- sementara, ntar ganti pake data dynamic -->
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Suhu</td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>TDS</td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>Turbidity</td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- Charts Section -->
    <div class="charts-section statistics-table">
        <div class="chart-row">
            <div class="chart-container">
                <h5>Grafik PH</h5>
                <canvas id="phChart"></canvas>
            </div>
            <div class="chart-container">
                <h5>Grafik Suhu</h5>
                <canvas id="suhuChart"></canvas>
            </div>
        </div>
        <div class="chart-row">
            <div class="chart-container">
                <h5>Grafik TDS</h5>
                <canvas id="tdsChart"></canvas>
            </div>
            <div class="chart-container">
                <h5>Grafik Turbidity</h5>
                <canvas id="turbidityChart"></canvas>
            </div>
        </div>

        <!-- Analisis AI Button -->
        <div class="ai-analysis">

            <button class="btn btn-ai"><svg class="svg-bintang" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" preserveAspectRatio="xMidYMid meet" style="width: 1.5em; height: 1.5em; max-width: 100%; max-height: 100%; vertical-align: middle;"><g fill="none"><path d="m12.594 23.258l-.012.002l-.071.035l-.02.004l-.014-.004l-.071-.036q-.016-.004-.024.006l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.016-.018m.264-.113l-.014.002l-.184.093l-.01.01l-.003.011l.018.43l.005.012l.008.008l.201.092q.019.005.029-.008l.004-.014l-.034-.614q-.005-.019-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.003-.011l.018-.43l-.003-.012l-.01-.01z"/><path fill="#FFA630" d="M9.107 5.448c.598-1.75 3.016-1.803 3.725-.159l.06.16l.807 2.36a4 4 0 0 0 2.276 2.411l.217.081l2.36.806c1.75.598 1.803 3.016.16 3.725l-.16.06l-2.36.807a4 4 0 0 0-2.412 2.276l-.081.216l-.806 2.361c-.598 1.75-3.016 1.803-3.724.16l-.062-.16l-.806-2.36a4 4 0 0 0-2.276-2.412l-.216-.081l-2.36-.806c-1.751-.598-1.804-3.016-.16-3.724l.16-.062l2.36-.806A4 4 0 0 0 8.22 8.025l.081-.216zM19 2a1 1 0 0 1 .898.56l.048.117l.35 1.026l1.027.35a1 1 0 0 1 .118 1.845l-.118.048l-1.026.35l-.35 1.027a1 1 0 0 1-1.845.117l-.048-.117l-.35-1.026l-1.027-.35a1 1 0 0 1-.118-1.845l.118-.048l1.026-.35l.35-1.027A1 1 0 0 1 19 2"/></g></svg>
                Analisis AI</button>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>

<!-- Chart.js Library -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
    // fungsi date picker
    flatpickr("#tanggalAwal", {
        dateFormat: "d/m/Y"
    });
    flatpickr("#tanggalAkhir", {
        dateFormat: "d/m/Y"
    });

    // dumny data charts sementara
    const sampleData = {
        labels: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10'],
        datasets: [{
            data: [7, 6.8, 7.2, 6.9, 7.1, 6.7, 7.3, 6.8, 7.0, 6.9],
            backgroundColor: 'rgba(46, 196, 182, 0.6)',
            borderColor: 'rgba(46, 196, 182, 1)',
            borderWidth: 2,
            fill: true
        }]
    };

    const chartConfig = {
        type: 'line',
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: false
                }
            },
            scales: {
                y: {
                    beginAtZero: false
                }
            }
        }
    };

    // Create PH Chart
    const phCtx = document.getElementById('phChart').getContext('2d');
    new Chart(phCtx, {
        ...chartConfig,
        data: {
            ...sampleData,
            datasets: [{
                ...sampleData.datasets[0],
            backgroundColor: 'rgba(46, 196, 182, 0.6)',
            borderColor: 'rgba(46, 196, 182, 1)'
        }]
    }
});

// Create Suhu Chart
const suhuCtx = document.getElementById('suhuChart').getContext('2d');
new Chart(suhuCtx, {
    ...chartConfig,
    data: {
        ...sampleData,
        datasets: [{
            ...sampleData.datasets[0],
            data: [25, 26, 24, 27, 25, 26, 24, 25, 26, 25],
            backgroundColor: 'rgba(255, 166, 48, 0.6)',
            borderColor: 'rgba(255, 166, 48, 1)'
        }]
    }
});

// Create TDS Chart
const tdsCtx = document.getElementById('tdsChart').getContext('2d');
new Chart(tdsCtx, {
    ...chartConfig,
    data: {
        ...sampleData,
        datasets: [{
            ...sampleData.datasets[0],
            data: [150, 145, 160, 155, 150, 140, 165, 150, 145, 155],
            backgroundColor: 'rgba(46, 196, 182, 0.6)',
            borderColor: 'rgba(46, 196, 182, 1)'
        }]
    }
});

// Create Turbidity Chart
const turbidityCtx = document.getElementById('turbidityChart').getContext('2d');
new Chart(turbidityCtx, {
    ...chartConfig,
    data: {
        ...sampleData,
        datasets: [{
            ...sampleData.datasets[0],
            data: [2, 1.8, 2.2, 1.9, 2.1, 1.7, 2.3, 1.8, 2.0, 1.9],
            backgroundColor: 'rgba(255, 166, 48, 0.6)',
            borderColor: 'rgba(255, 166, 48, 1)'
        }]
    }
});
</script>


{% endblock %}