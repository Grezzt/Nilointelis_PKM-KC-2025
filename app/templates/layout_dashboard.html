<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nilontellis</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../static/css/style.css">
    <link rel="icon" href="../static/assets/Logo-nila.jpg" type="image/x-icon">
    {% block styles %}
    {% endblock %}
</head>
<body>
    <!-- bagian responsive mobile -->

    <!-- Hamburger Button -->
    <button class="hamburger-btn" id="hamburgerBtn">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
            <path fill="#1b1b1b" d="M4 18q-.425 0-.712-.288T3 17t.288-.712T4 16h16q.425 0 .713.288T21 17t-.288.713T20 18zm0-5q-.425 0-.712-.288T3 12t.288-.712T4 11h16q.425 0 .713.288T21 12t-.288.713T20 13zm0-5q-.425 0-.712-.288T3 7t.288-.712T4 6h16q.425 0 .713.288T21 7t-.288.713T20 8z"/>
        </svg>
    </button>

    <!-- container sidebar buat mobile -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- end responsive mobile -->

    <!-- sidebar -->
    <div class="sidebar d-flex flex-column" id="sidebar">
        <h4 class="title">NiloIntellis</h4>
        <a href="{{ url_for('dashboard.dashboard') }}"{% block sidebar_dasboard %} {% endblock %}>
            <svg xmlns="http://www.w3.org/2000/svg" width="31" height="32" viewBox="0 0 24 24"><g fill="currentColor"><path d="M10 12a1 1 0 1 0 0 2h4a1 1 0 0 0 0-2z"/><path fill-rule="evenodd" d="M4 2a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h16a3 3 0 0 0 3-3V5a3 3 0 0 0-3-3zm16 2H4a1 1 0 0 0-1 1v3h18V5a1 1 0 0 0-1-1M3 19v-9h18v9a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1" clip-rule="evenodd"/></g></svg>
            Dashboard</a>
        <a href="{{ url_for('monitoring.monitoring') }}" {% block sidebar_monitoring %} {% endblock %}>
            <svg xmlns="http://www.w3.org/2000/svg" width="31" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M7.882 2h8.236l1.5 3H23v16H1V5h5.382zm1.236 2l-1.5 3H3v12h18V7h-4.618l-1.5-3zM12 9.5a3 3 0 1 0 0 6a3 3 0 0 0 0-6m-5 3a5 5 0 1 1 10 0a5 5 0 0 1-10 0"/></svg>
            Monitoring</a>
        <a href="{{ url_for('prediksi.prediksi') }}" {% block sidebar_prediksi %} {% endblock %}>
            <svg xmlns="http://www.w3.org/2000/svg" width="31" height="32" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M12.05 1.25h-.1c-.664 0-1.237 0-1.696.062c-.491.066-.963.215-1.345.597s-.531.854-.597 1.345c-.062.459-.062 1.032-.062 1.697v2.427a2.3 2.3 0 0 0-.75-.128h-3A2.25 2.25 0 0 0 2.25 9.5v11.75H2a.75.75 0 0 0 0 1.5h20a.75.75 0 0 0 0-1.5h-.25V14.5a2.25 2.25 0 0 0-2.25-2.25h-3q-.396.002-.75.128V4.951c0-.665 0-1.238-.062-1.697c-.066-.491-.215-.963-.597-1.345s-.853-.531-1.345-.597c-.459-.062-1.032-.062-1.697-.062m8.2 20V14.5a.75.75 0 0 0-.75-.750h-3a.75.75 0 0 0-.75.75v6.75zm-6 0V5c0-.728-.002-1.2-.048-1.546c-.044-.325-.115-.427-.172-.484s-.159-.128-.484-.172c-.347-.046-.818-.048-1.546-.048s-1.2.002-1.546.048c-.325.044-.427.115-.484.172s-.128.159-.172.484c-.046.347-.048.818-.048 1.546v16.25zm-6 0V9.5a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75v11.75z" clip-rule="evenodd"/></svg>
            Prediksi</a>
        <a href="{{ url_for('chatbot.chatbot') }}" {% block sidebar_chatbot %} {% endblock %}>
            <svg xmlns="http://www.w3.org/2000/svg" width="31" height="32" viewBox="0 0 24 24"><path fill="currentColor" d="M6 14h8v-2H6zm0-3h12V9H6zm0-3h12V6H6zM2 22V4q0-.825.588-1.412T4 2h16q.825 0 1.413.588T22 4v12q0 .825-.587 1.413T20 18H6zm3.15-6H20V4H4v13.125zM4 16V4z"/></svg>
            Chatbot</a>
        <!-- <form action="{{ url_for('main.logout') }}" method="post" style="margin-top: 1rem;">
            <button type="submit" class="btn btn-sm btn-logout" onclick="return confirm('Apakah Anda yakin ingin logout?')">
            Log Out
            </button>
        </form> -->

        <button type="button" class="btn btn-sm btn-logout" data-bs-toggle="modal" data-bs-target="#logoutModal">
            Log Out
        </button>
    </div>

    <main class="main-content">
        {% block content %}
        <!-- konten utama page -->
        {% endblock %}
    </main>

    <!-- Logout Confirmation Modal -->
    <div class="modal fade" id="logoutModal" tabindex="-1" aria-labelledby="logoutModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content logout-modal">
                <div class="modal-header border-0">
                    <h5 class="modal-title logout-modal-title" id="logoutModalLabel">
                        Konfirmasi Logout
                    </h5>
                    <button type="button" class="btn-close logout-modal-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body logout-modal-body">
                    <div class="logout-icon-container">
                        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="currentColor" class="logout-icon">
                            <path d="M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h6q.425 0 .713.288T12 4t-.287.713T11 5H5v14h6q.425 0 .713.288T12 20t-.287.713T11 21zm12.175-8H10q-.425 0-.712-.288T9 12t.288-.712T10 11h7.175L15.3 9.125q-.275-.275-.275-.675t.275-.7t.7-.313t.725.288L20.3 11.3q.3.3.3.7t-.3.7l-3.575 3.575q-.3.275-.712.288t-.713-.288q-.275-.3-.262-.712t.287-.688z"/>
                        </svg>
                    </div>
                    <p class="logout-message">Apakah Anda yakin ingin keluar dari sistem?</p>
                    <p class="logout-submessage">Anda akan diarahkan ke halaman login.</p>
                </div>
                <div class="modal-footer border-0 logout-modal-footer">
                    <button type="button" class="btn btn-secondary logout-cancel-btn" data-bs-dismiss="modal">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 5px;">
                            <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                        </svg>
                        Batal
                    </button>
                    <form action="{{ url_for('main.logout') }}" method="post" style="display: inline;">
                        <button type="submit" class="btn logout-confirm-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 5px;">
                                <path d="M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h6q.425 0 .713.288T12 4t-.287.713T11 5H5v14h6q.425 0 .713.288T12 20t-.287.713T11 21zm12.175-8H10q-.425 0-.712-.288T9 12t.288-.712T10 11h7.175L15.3 9.125q-.275-.275-.275-.675t.275-.7t.7-.313t.725.288L20.3 11.3q.3.3.3.7t-.3.7l-3.575 3.575q-.3.275-.712.288t-.713-.288q-.275-.3-.262-.712t.287-.688z"/>
                            </svg>
                            Ya, Logout
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Hamburger Menu Toggle
        const hamburgerBtn = document.getElementById('hamburgerBtn');
        const sidebar = document.getElementById('sidebar');
        const sidebarOverlay = document.getElementById('sidebarOverlay');
        const body = document.body;

        hamburgerBtn.addEventListener('click', function() {
            sidebar.classList.toggle('sidebar-open');
            sidebarOverlay.classList.toggle('overlay-active');
            hamburgerBtn.classList.toggle('hamburger-active');

            // Prevent body scroll when sidebar is open on mobile
            if (window.innerWidth <= 768) {
                body.classList.toggle('no-scroll');
            }
        });

        // Close sidebar when clicking overlay
        sidebarOverlay.addEventListener('click', function() {
            closeSidebar();
        });

        // Close sidebar when clicking on link (mobile/tablet)
        const sidebarLinks = document.querySelectorAll('.sidebar a');
        sidebarLinks.forEach(link => {
            link.addEventListener('click', function() {
                if (window.innerWidth <= 992) {
                    closeSidebar();
                }
            });
        });

        // Handle window resize
        window.addEventListener('resize', function() {
            if (window.innerWidth > 992) {
                closeSidebar();
            }
        });

        // Function to close sidebar
        function closeSidebar() {
            sidebar.classList.remove('sidebar-open');
            sidebarOverlay.classList.remove('overlay-active');
            hamburgerBtn.classList.remove('hamburger-active');
            body.classList.remove('no-scroll');
        }

        // Close sidebar on escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && sidebar.classList.contains('sidebar-open')) {
                closeSidebar();
            }
        });

        // Logout Modal Enhancement
        const logoutModal = document.getElementById('logoutModal');

        // Add smooth animation when modal shows
        if (logoutModal) {
            logoutModal.addEventListener('show.bs.modal', function() {
                document.body.style.overflow = 'hidden';
            });

            logoutModal.addEventListener('hidden.bs.modal', function() {
                document.body.style.overflow = 'auto';
            });

            // Add click sound effect (optional)
            const logoutBtn = document.querySelector('[data-bs-target="#logoutModal"]');
            const confirmBtn = document.querySelector('.logout-confirm-btn');
            const cancelBtn = document.querySelector('.logout-cancel-btn');

            // Add hover effects
            if (confirmBtn) {
                confirmBtn.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-2px) scale(1.02)';
                });

                confirmBtn.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) scale(1)';
                });
            }

            if (cancelBtn) {
                cancelBtn.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-2px) scale(1.02)';
                });

                cancelBtn.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) scale(1)';
                });
            }
        }
    </script>

    {% block scripts %}
    {% endblock %}
</body>
</html>
